version: "3.6"
services:
  server:
    container_name: app_server
    restart: always
    environment:
      - TZ=Europe/Kiev
      - NODE_ENV=production
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - 3000:3000
    volumes:
      # Монтируем исходные файлы проекта в контейнер (для копирования при старте)
      - .:/addons/my_addons/my_home:ro
      # Монтируем data и data_src для работы приложения
      - ./data:/my_home/data
      - ./data_src:/my_home/data_src
    network_mode: host
    pid: host
    privileged: true
    networks:
      - cedalo-platform

networks:
  cedalo-platform:
    name: cedalo-platform
    driver: bridge
